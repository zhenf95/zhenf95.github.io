[{"content":"Grouped Patterns of Heterogeneity in Panel Data (with Elena Manresa)\nEconometrica, 83(3), 1147-1184, May 2015.\nSummary: This post basically summarizes the grouped panel data model, which allows time-varying grouped patterns of unobservable heterogeneity in linear panel data models (Bonhomme and Manresa 2015).\nModel Specification The linear model with grouped patterns of heterogeneity:\n$$ y_{it} = x'_{it}\\theta + \\alpha_{g_{i}t}+v_{it},\\quad\\quad i = 1,\u0026hellip;,N,\\quad t = 1,\u0026hellip;,T, $$ where\n​\t$x_{ij}$: covariates, $E[v_{ij}|x_{ij}]=0$\n​\t$\\alpha_{g_{i}t}$: unrestricted group-specific unobservables, Grouped Fixed Effects (GFE)\n​\t$g_{i}\\in\\{1,\u0026hellip;,G\\}$: group membership variables, time-invariant\n​\t$G$: the number of groups, to be set or estimated by the researcher\nEstimation GFE estimator in model (1) can be defined as the solution of the following problem: $$ (\\hat{\\theta},\\hat{\\alpha},\\hat{\\gamma})=\\underset{(\\theta,\\alpha,\\gamma)\\in \\mathit{\\Theta} \\times \\mathcal{A}^{GT}\\times\\mathit{\\Gamma}_G}{\\operatorname{argmin}}\\sum_{i=1}^{N}\\sum_{t=1}^{T}(y_{it}-x'_{it}\\theta-\\alpha_{g_{i}t})^2 $$ where\n​\tCovariates parameters: $\\theta\\in\\mathit{\\Theta}$, $\\mathit{\\Theta}\\subseteq\\mathbb{R}^K$\n​\tGroup-specific time effects: $\\alpha_{gt}\\in\\mathcal{A}$, $\\mathcal{A}\\subseteq\\mathbb{R}$\n​\tGroup membership variables: $g_i$\n​\t$\\alpha$: the set of all $\\alpha_{g_{i}t}$\n​\t$\\gamma=\\{g_1,\u0026hellip;,g_N\\}$, $\\gamma\\in\\mathit{\\Gamma}_G$\n​\t$\\mathit{\\Gamma}_G$: the set of all groupings of $\\{1,\u0026hellip;,N\\}$ into at most $G$ groups\nWe can estimate the above GFE estimator by the following algorithm:\nAlgorithm 1: Iterative:\n  Let $(\\theta^{(0)},\\alpha^{(0)})\\in\\mathit{\\Theta}\\times\\mathcal{A}^{GT}$ be some starting value. Set $s=0$.\n  (Assignment step) Compute for all $i\\in{1,\u0026hellip;,N}$: $$ g_i^{s+1}=\\underset{g\\in{1,\u0026hellip;,G}}{\\operatorname{argmin}}\\sum_{t=1}^T(y_{it}-x'_{it}\\theta^{(s)}-\\alpha_{gt}^{(s)})^2 $$\n  (Update step) Compute: $$ (\\theta^{(s+1)},\\alpha^{(s+1)})=\\underset{(\\theta,\\alpha)\\in \\mathit{\\Theta} \\times \\mathcal{A}^{GT}}{\\operatorname{argmin}}\\sum_{i=1}^N\\sum_{t=1}^N(y_{it}-x'_{it}\\theta-\\alpha_{g_i^{(s+1)}t}) $$\n  Set $s=s+1$ and go to Step 2 (until numerical convergence).\n  To solve large scale problem, we can use kmeans clustering algorithm (Forgy 1965) to develop a more efficient computational routine, as proposed in Algorithm 2.\nAlgorithm 2: Variable Neighborhood Search\n  Let $(\\theta,\\alpha)\\in\\mathit{\\Theta}\\times\\mathcal{A}^{GT}$ be some starting value.\nPerform one assignment step of Algorithm 1 and obtain an initial grouping $\\gamma_{\\text{init}}$.\nSet $iter_{\\text{max}}$ and $neigh_{\\text{max}}$ to some desired values.\nSet $j=0$.\nSet $\\gamma^*=\\gamma_{\\text{init}}$.\n  Set $n=1$.\n  (Neighborhood jump) Relocate $n$ randomly selected units to $n$ randomly selected groups, and obtain a new grouping $\\gamma^{\\prime}$.\nPerform one updated step of Algorithm 1 and obtain new parameter values $(\\theta^{\\prime},\\alpha^{\\prime})$.\n  Set $(\\theta^{(0)},\\alpha^{(0)})=(\\theta^{\\prime},\\alpha^{\\prime})$, and apply Algorithm 1.\n  (Local search) Starting from the grouping $\\gamma=\\{g_1,\u0026hellip;,g_N\\}$ obtained in Step 4, systematically check all reassignments of units $i\\in\\{1,\u0026hellip;,N\\}$ to groups $g\\in\\{1,\u0026hellip;,G\\}$ (for $g\\ne g_i$), updating $g_i$ when the objective function decreases; stop when no further reassignment improves the objective function.\nLet the resulting grouping be $\\gamma^{\\prime\\prime}$.\n  If the objective function using $\\gamma^{\\prime\\prime}$ improves relative to the one using $\\gamma^*$, then set $\\gamma^*=\\gamma^{\\prime\\prime}$ and go to Step 2; otherwise, set $n=n+1$ and go to Step 7.\n  If $n\\leq neigh_{\\text{max}}$, then go to Step 3; otherwise go to Step 8.\n  Set $j=j+1$. If $j\u0026gt;iter_{\\text{max}}$, then Stop; otherwise go to Step 2.\n  Extensions   Unit-Specific Heterogeneity $$ y_{it}=x'_{it}\\theta+\\alpha_{g_{i}t}+\\eta_i+v_{it} $$ This can be transformed into (1) by taking deviations: $$ y_{it}-\\bar{y}_i=(x'_{it}-\\bar{x}_i)\\theta+\\alpha_{g_{i}t}-\\bar{\\alpha}_{g_i}+v_{it}-\\bar{v}_i $$\n  Heterogeneous Coefficients $$ y_{it}=x'_{it}\\theta_{g_{i}}+\\alpha_{g_{i}t}+v_{it} $$ This can be estimated by the following estimator: $$ (\\hat{\\theta},\\hat{\\alpha},\\hat{\\gamma})=\\underset{(\\theta,\\alpha,\\gamma)\\in \\mathit{\\Theta} \\times \\mathcal{A}^{GT}\\times\\mathit{\\Gamma}_G}{\\operatorname{argmin}}\\sum_{i=1}^{N}\\sum_{t=1}^{T}(y_{it}-x'_{it}\\theta_{g_i}-\\alpha_{g_{i}t})^2 $$\n  Nonlinear Models\n  Suppose $m_{it}(\\cdot)$ is a function dependent on data, we can formulate the estimator of any nonlinear models as follows: $$ (\\hat{\\theta},\\hat{\\alpha},\\hat{\\gamma})=\\underset{(\\theta,\\alpha,\\gamma)\\in \\mathit{\\Theta} \\times \\mathcal{A}^{GT}\\times\\mathit{\\Gamma}_G}{\\operatorname{argmin}}\\sum_{i=1}^{N}\\sum_{t=1}^{T}m_{it}(\\theta,\\alpha_t,g_i) $$\nThis can be transformed into likelihood models as special cases by taking $m_{it}(\\theta,\\alpha_t,g_i)=-\\ln f(y_{it}|x_{it};\\theta,\\alpha_t,g_i)$, where $f(\\cdot)$ is the parametric density function. Thus, we can also estimate the static and dynamic discrete choice models.\nComparison Unit-specific Fixed Effects: fixed effects estimators suffer from an $O(1/T)$ bias as $N/T$ tends to a constant (Arellano and Hahn 2007). GFE estimator is consistent and asymptotically normal as $N/T^\\nu$ tends to zero for some $\\nu\u0026gt;0$. This makes GFE estimator more suitable to the context where $N$ grow substantially faster than $T$.\nFinite Mixture Models: restrict the relationship between unobserved heterogeneity and covariates (McLachlan and Peel 2000, Frühwirth-Schnatter 2006), GFE estimates the unrestricted relationship.\nInteractive Fixed Effects: (Bai 2009) GFE has a similar factor-analytic structure as this model $\\alpha_{g_{i}t}=\\sum_{g=1}^{G}\\mathbf{1}\\{g_{i}=g\\}\\alpha_{gt}$. With data of short panels and grouped structure, GFE is more parsimonious.\nOther models with group structure:\n Bester and Hansen (2013): grouping individual fixed-effects with known groups can gain precision Lin and Ng (2012): random coefficients model with time-series regression to classify individuals into groups  Other Models  Spatial dependence models for panel data (Sarafidis and Wansbeek 2012) Social interaction models for panel data (Blume, Brock, Durlauf, and Ioannides 2011) Interactive fixed-effects models (Bai 2009)  Useful Resources  Supplementary appendix Replication files Stata code to compute the grouped fixed-effects estimator on your data  References Arellano, M., \u0026amp; Hahn, J. (2007). Understanding bias in nonlinear panel models: Some recent developments. Econometric Society Monographs, 43, 381.\nBai, J. (2009). Panel data models with interactive fixed effects. Econometrica, 77(4), 1229-1279.\nBester, C. A., \u0026amp; Hansen, C. B. (2016). Grouped effects estimators in fixed effects models. Journal of Econometrics, 190(1), 197-208.\nBonhomme, S., \u0026amp; Manresa, E. (2015). Grouped patterns of heterogeneity in panel data. Econometrica, 83(3), 1147-1184.\nBlume, L. E., Brock, W. A., Durlauf, S. N., \u0026amp; Ioannides, Y. M. (2011). Identification of social interactions. In Handbook of social economics (Vol. 1, pp. 853-964). North-Holland.\nForgy, E. W. (1965). Cluster Analysis of Multivariate Data: Efficiency vs. Interpretability of Classifications, Biometrics, 21, 768\u0026ndash;769.\nFrühwirth-Schnatter, S. (2006). Finite mixture and Markov switching models. Springer Science \u0026amp; Business Media.\nLin, C. C., \u0026amp; Ng, S. (2012). Estimation of panel data models with parameter heterogeneity when group membership is unknown. Journal of Econometric Methods, 1(1), 42-55.\nMcLachlan, G., \u0026amp; Peel, D. (2000). Finite Mixture Models. Wiley Series in Probability and Statistics: Applied Probability and Statistics. New York: Wiley-Interscience.\nSarafidis, V., \u0026amp; Wansbeek, T. (2012). Cross-sectional dependence in panel data analysis. Econometric Reviews, 31(5), 483-531.\n","permalink":"https://zhenf95.github.io/posts/2021-03-03-grouped-fixed-effects/","summary":"Grouped Patterns of Heterogeneity in Panel Data (with Elena Manresa)\nEconometrica, 83(3), 1147-1184, May 2015.\nSummary: This post basically summarizes the grouped panel data model, which allows time-varying grouped patterns of unobservable heterogeneity in linear panel data models (Bonhomme and Manresa 2015).\nModel Specification The linear model with grouped patterns of heterogeneity:\n$$ y_{it} = x'_{it}\\theta + \\alpha_{g_{i}t}+v_{it},\\quad\\quad i = 1,\u0026hellip;,N,\\quad t = 1,\u0026hellip;,T, $$ where\n​\t$x_{ij}$: covariates, $E[v_{ij}|x_{ij}]=0$","title":"Grouped Fixed Effects"},{"content":"Reference Kris Johnson Ferreira, Joel Goh (2021) Assortment Rotation and the Value of Concealment. Management Science 67(3):1489-1507. https://doi.org/10.1287/mnsc.2020.3610\nSummary This paper investigates assortment rotation, a retailing practice of changing product assortment offered to consumers. By allowing consumers to purchase multiple products throughout a season, this study compares the fixed assortment strategy (i.e., offering all products for the entire season) and sequential assortment strategy (i.e., offer each product sequentially through the selling season, one for a time). They find that the retailer can gain the value of catalog concealment due to the uncertainty of consumer’s product valuation. But the forward looking behavior of consumers can lead to a context dependent value of concealment.\nResearch Questions To understand what drives the benefits of assortment rotation for a retailer when the consumer may consider purchasing multiple products in the same category by comparing fixed and sequential assortment strategies.\nMethodology Random utility model (McFadden 1980)\nFull satiation model (Baucells and Sarin 2007, Caro and Martınez-de-Albéniz 2012)\n  Diminishing marginal utility (Marshall 1890)\n  Marginal utility diminishing in quantity of product purchases (Baucells and Sarin 2007) $$ u(S):=\\sum_{j \\in S}\\left(X_{j}-p_{j}\\right)+V(|S|)=\\sum_{j \\in S}\\left(X_{j}-p_{j}\\right)+\\sum_{j=0}^{|S|-1} v(j) $$ $X_j$ is the valuation shock for product $i$, a scalar-valued random variables that mutually independent with other $X$s, but not necessarily iid.\n$S\\in\\{1,\u0026hellip;,N\\}$ is the subset of products consumer purchased.\n  Conclusions  It is optimal for the retailer to include all products when choosing the sequential assortment strategy, which is not necessarily the case for the fixed assortment strategy. Compared to Bernstein Martínez-de-Albéniz (2017)  Each consumer can only purchase one product during a season Capacity constraints are the key reason to implement assortment rotation. In the absence of capacity constraints, fixed assortment strategy dominates sequential assortment strategy. This paper show that allowing multiple purchases can lead to the outperformance of sequential assortment strategy, that is, the value of concealment is positive.   With forward looking consumer behavior (i.e., consumers consider the expected utility they would gain from future purchases when making the current purchase decision, leading to a dynamic programming problem), the value of concealment can be positive or negative.  Useful Resources   Random utility model (with or without Gumbel-distributed shocks) for assortment modeling (McFadden 1980, Fox et al. 2018)\n  Assumption of price exogeneity in assortment planning (Caro et al. 2014, Davis et al. 2015, Bernstein Martínez-de-Albéniz 2017)\n  Hazard rate ordering\nDefinition: Let $U$, $V$ be real-valued random variables. We say that $U$ is smaller than $V$ in the hazard rate order, denoting this as $U\\leq_{hr}V$, if $\\frac{\\mathbb{P}(U\u0026gt;x+\\delta)}{\\mathbb{P}(U\u0026gt;x)} \\leq \\frac{\\mathbb{P}(V\u0026gt;x+\\delta)}{\\mathbb{P}(V\u0026gt;x)}$ for every $\\delta\\ge0$ and $x\\in\\mathfrak{R}$.\n A type of stochastic ordering, most commonly defined for nonnegative random variables Shaked and Shanthikumar (2007, p.16, equation(1.B.4)) give the definition of the generic real-valued signed random variables.    Sample average approximation (SAA) with large sample approximation guarantees (Kleywegt et al. 2002): formulate the problem as a mixed-integer linear program (MILP)\n  Proper nouns\n Assortment rotation: the retailing practice of changing the assortment of products offered to customers throughout a selling season. Satiation: multiple similar purchases over time yield diminishing marginal utilities (Baucells and Sarin 2007, Caro and Martınez-de-Albéniz 2012). Independent assortment search: retailers have unique assortment such as antique dealers and jewelry stores, thus the consumer expected value of search is independent of the assortment (Cachon et al. 2005). Overlapping assortment search: only limited number of products on the market, thus expanding assortment leads to lower value of search (Cachon et al. 2005).    My Thoughts  Sometimes it can be useful to model an additional effect by directly adding another term in the utility function, such as the diminishing marginal utility. Also, it is useful to assume it only depends on the quantity not the specific products. The random utility model with the product valuation as the random variables is useful as a base model. When impossible to generate results, we can add some conditions to solve some insightful results. Important to generate new ideas from the old topic:  Single purchase ⇒ multiple purchases Different strategies to compare etc\u0026hellip;    ","permalink":"https://zhenf95.github.io/posts/2021-03-05-assortment-rotation-and-the-value-of-concealment/","summary":"Reference Kris Johnson Ferreira, Joel Goh (2021) Assortment Rotation and the Value of Concealment. Management Science 67(3):1489-1507. https://doi.org/10.1287/mnsc.2020.3610\nSummary This paper investigates assortment rotation, a retailing practice of changing product assortment offered to consumers. By allowing consumers to purchase multiple products throughout a season, this study compares the fixed assortment strategy (i.e., offering all products for the entire season) and sequential assortment strategy (i.e., offer each product sequentially through the selling season, one for a time).","title":"Assortment Rotation and the Value of Concealment"}]